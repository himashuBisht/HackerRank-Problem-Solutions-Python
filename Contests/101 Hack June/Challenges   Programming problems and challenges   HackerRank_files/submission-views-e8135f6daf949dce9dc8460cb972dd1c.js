(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="grouped-submissions",e.prototype.className="grouped-submissions-view",e.prototype.initialize=function(a){this.listenTo(this.collection,"reset",this.render);if(_.isObject(this.collection.challenge))return this.listenToOnce(this.collection.challenge("reset",this.render))},e.prototype.events={"click .expand":"expandChallenge"},e.prototype.expandChallenge=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).parents(".table-primary").find(".table-sub"),b.hasClass("block")?b.slideUp(200).removeClass("block").css("height: auto"):b.slideDown(200).addClass("block").css("height: auto")},e.prototype.render=function(){var a,b;return $(this.el).html(c.appController.template(this.template,this)({collection:this.collection})),c.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),c.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage(),null,a=10),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),b=this,_.each(this.collection.models,function(a){var d;return d=new c.GroupedSubmissionsListView({model:a}),b.$(".submissions-list-wrapper").append(d.render().el)})):this.$(".submissions-list-wrapper").append(c.appController.viewLoader(64))),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.GroupedSubmissionsView=a})}).call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="grouped-submissions-list",e.prototype.className="grouped-submissions-list-view",e.prototype.initialize=function(a){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},e.prototype.render=function(){var a,b;return this.model.get("challenge")&&(b=this.model.get("submissions"),a=b[0],b=b.slice(1),$(this.el).html(c.appController.template(this.template,this)({model:this.model.toJSON(),firstSubmission:a,challenge:this.model.challenge,submissions:b,ns:this.model.ns()}))),this.delegateEvents(),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.GroupedSubmissionsListView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submissions",e.prototype.className="submissions-view",e.prototype.initialize=function(a){this.listenTo(this.collection,"reset",this.render);if(_.isObject(this.collection.challenge))return this.listenTo(this.collection.challenge,"reset",this.render)},e.prototype.render=function(){var b;return $(this.el).html(a.appController.template(this.template,this)({collection:this.collection})),a.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),a.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.$(".submissions-list-wrapper").html(""),b=this,_.each(this.collection.models,function(c){var d;return d=new a.SubmissionsListView({model:c,challenge:b.collection.challenge}),b.$(".submissions-list-wrapper").append(d.render().el)})),this},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submissions-list",e.prototype.className="submissions-list-view",e.prototype.initialize=function(a){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.challenge=a.challenge},e.prototype.render=function(){return $(this.el).html(a.appController.template(this.template,this)({model:this.model,challenge:this.challenge})),this.delegateEvents(),this},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionsListView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-list",e.prototype.className="submission-list-view",e.prototype.render=function(){return $(this.el).html(a.appController.template(this.template,this)()),this.delegateEvents(),this},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionListView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="chronological-submissions",e.prototype.className="chronological-submissions-view",e.prototype.initialize=function(a){this.listenTo(this.collection,"reset",this.render);if(_.isObject(this.collection.challenge))return this.listenToOnce(this.collection.challenge("reset",this.render))},e.prototype.render=function(){var a;return $(this.el).html(c.appController.template(this.template,this)({collection:this.collection})),c.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),c.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+"all/",this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),a=this,_.each(this.collection.models,function(b){var d;return d=new c.ChronologicalSubmissionsListView({model:b}),a.$(".submissions-list-wrapper").append(d.render().el)})):this.$(".submissions-list-wrapper").append(c.appController.viewLoader(64))),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.ChronologicalSubmissionsView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="chronological-submissions-list",e.prototype.className="chronological-submissions-list-view",e.prototype.initialize=function(a){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},e.prototype.render=function(){return console.log(this.model),$(this.el).html(c.appController.template(this.template,this)({model:this.model,challenge:this.model.get("challenge")})),this.delegateEvents(),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.ChronologicalSubmissionsListView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission",e.prototype.className="submission-view",e.prototype.events={"click .copy_to_clipboard":"CopyToClipBoard"},e.prototype.initialize=function(a){return this.contest=a.contest,this.has_template=!1},e.prototype.setSubmissionModel=function(a){return this.model=a,this.listenTo(this.model,"reset",this.render),this.renderCurrentView()},e.prototype.setGameSetCollection=function(a){return this.collection=a,this.listenTo(this.collection,"reset",this.render),this.renderSubViews()},e.prototype.render=function(){return this.has_template?(this.renderCurrentView(),this.renderSubViews()):a.appController.getTemplate(this.template,function(a){return this.has_template=!0,this._template=a,this.renderCurrentView(),this.renderSubViews()},this),this},e.prototype.renderCurrentView=function(){var b,c,d,e;return(!this.rendered||this.previous_model_id!==this.model.get("id"))&&this._template&&this.model&&($(this.el).html(this._template({model:this.model.toJSON(),_model:this.model})),this.$("#submission-code").length>0&&(b=this.$("#submission-code").get(0),c={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,mode:lang_mime_mapping[this.model.get("language")],indentUnit:4,readOnly:!0,value:this.model.get("code")},this.editor=CodeMirror(b,c)),this.rendered=!0,this.renderSubViews(),this.previous_model_id=this.model.get("id"),this._ThrobberTimer&&window.clearTimeout(this._ThrobberTimer),this.model.get("slug")||(e=this,d=function(a){var b;a==null&&(a=0),b=["fetching your submission","analysing statistics","generating report"];if(e.$(".gray").length>0)return e.$(".gray .msg").html(b[a%b.length]),e._ThrobberTimer=setTimeout(function(){return d(a+1)},1500)},this._ThrobberTimer=setTimeout(function(){return d()},500))),a.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.model.breadCrumbs())},e.prototype.renderSubViews=function(){var b,c,d,e,f,g;return this.model&&this.model.sync_status!==!0||!this.rendered?this:(f=this.model.get("game_total"),b=this.model.get("game_played"),d=this.model.get("status_code"),c=0,d!==0&&(c+=10),f>0&&(c+=b/(f*1)*90),e=this,c===100&&(g=function(){return $(".progress-bar").next().fadeOut(),$(".progress-bar").fadeOut(),e.model.set("startLock",!0)},setTimeout(g,2e3)),this.stats||(this.stats=new a.SubmissionStatsView({parent:this})),this.stats.setModel(this.model),this.model.get("kind")==="game"&&(this.gameset||(this.gameset=new a.SubmissionGameSetView({parent:this})),this.gameset.setModel(this.model),this.gameset.setGameSetCollection(this.collection),this.manualgameplay||(this.manualgameplay=new a.SubmissionManualGamePlayView({contest:this.contest})),this.manualgameplay.setModel(this.model),this.manualgameplay.setGameSetCollection(this.collection),this.assign({"#submission-manual-game-play-wrapper":this.manualgameplay,"#submission-game-set-wrapper":this.gameset})),this.assign({"#submission-stats-wrapper":this.stats}),this.delegateEvents(),this)},e.prototype.renderManualGamePlay=function(){var a;return a=this},e.prototype.CopyToClipBoard=function(b){var c,d;return b.preventDefault(),a.router.navigate(""+a.appController.get_contest_namespace()+"/challenges/"+this.model.get("slug"),!0),d=this,c=function(){var b,e;try{return a.appView.getSubViews().content.body.request_view.codeeditor.header.setLangFromSubmission(d.model.get("language"),d.model.get("code")),e=function(){var b,c;return b=a.appView.getSubViews().content.body.request_view.codeeditor.header.$el.offset(),b&&b.top?(c=b.top,$("body,html").animate({scrollTop:c-10},200)):setTimeout(e,100)},e()}catch(f){return b=f,setTimeout(c,100)}},c()},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.SubmissionView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-stats",e.prototype.className="submission-stats-view",e.prototype.events={"click a.js-download-test-case":"promptDialog"},e.prototype.initialize=function(a){return $(".change-filter").live("click",this.updateSelect),this.render()},e.prototype.setModel=function(a){return this.model&&(this.model.unbind("change"),this.model.unbind("render")),this.model=a,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.render()},e.prototype.updateSelect=function(a){var b;return a.preventDefault(),b=$(a.target),$("#selected-filter span.select").html(b.text())},e.prototype.render=function(){var b;if(this.model)return this.model.get("game_total")===0&&this.model.set("percent",0),b=this,a.requires("compound/game-views","moment",function(){var c;return c=a.GameView.prototype.custom_player_count(),$(b.el).html(a.appController.template(b.template,b)({model:b.model.toJSON(),singlePlayer:!!c[b.model.get("codechecker_handle")]}))}),this.delegateEvents(),this},e.prototype.promptDialog=function(a){var b,c,d;return a.preventDefault(),b=$(a.target).attr("testcase-num"),c=this,d=this.model.toJSON(),$.ajax({url:"/rest/contests/"+c.contestSlug()+"/testcases/"+d.challenge_id+"/"+b+"/permission",type:"GET",success:function(a){if(a.permission===!0)return c.renderDownloadTestCase(b);if(a.permission===!1)return c.renderPurchaseTestCase(b)}})},e.prototype.renderPurchaseTestCase=function(b){var c,d,e,f=this;return d=this,e=this.model.toJSON(),c={title:"Purchase TestCase",body:"            <center><p> Do you wish to purchase test case #"+b+" of "+e.name+" for 5 hackos?</p>            <p class='block-center'><a href='#' class='btn btn-primary js-buy-test-case' data-analytics='Confirm Purchase Testcase'>Yes</a>&nbsp;&nbsp;&nbsp;                                    <a href='#' class='btn btn-primary js-dont-buy' data-analytics='Cancel Purchase Testcase'>No</a></p>            <div class='formgroup clearfix m'>              <div class='alert error hide'></div>            </div>            ",events:{"click a.js-buy-test-case":function(a){return a.preventDefault(),d=f,$.ajax({url:"/rest/contests/"+d.contestSlug()+"/testcases/"+e.challenge_id+"/"+b+"/purchase",type:"PUT",success:function(a){return d.dialog.destroy(),d.renderDownloadTestCase(b)},error:function(a){return $(".alert.error").show().html("Insufficient Hackos")}})},"click a.js-dont-buy":function(a){return a.preventDefault(),f.dialog.destroy()}}},this.dialog=new a.util.ShowDialog(c),this.dialog.render()},e.prototype.renderDownloadTestCase=function(b){var c,d,e,f=this;return d=this,e=this.model.toJSON(),c={title:"Download TestCase #"+b,body:"            <center><p> Download Test Case #"+b+" of "+e.name+"</p>            <p class='block-center'><a href='#' class='btn btn-primary js-download-test-case' command='testcaseinput' data-analytics='Download Input'>Input</a>&nbsp;&nbsp;&nbsp;                                    <a href='#' class='btn btn-primary js-download-test-case' command='testcaseoutput' data-analytics='Download Output'>Output</a></p>            <div class='formgroup clearfix m'>              <div class='alert error hide'></div>            </div>        ",events:{"click a.js-download-test-case":function(a){var c;return c=$(a.target).attr("command"),a.preventDefault(),window.open("/rest/contests/"+d.contestSlug()+"/testcases/"+e.challenge_id+"/"+b+"/"+c,"_blank")}}},this.dialog=new a.util.ShowDialog(c),this.dialog.render()},e.prototype.contestSlug=function(){return a.CONTEST_NAMESPACE||"master"},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionStatsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-success",e.prototype.className="submission-success-view",e.prototype.initialize=function(b){return this.hacker=a.profile()},e.prototype.events={"click a.close":"destroy","click a.fb-share":"fbShare","click a.tweet":"tweet"},e.prototype.render=function(){var b,c;return c=Math.floor(this.model.score*100)/100||0,c>0?(this.fbGraphChallengeCompleted(),b="&nbsp;&nbsp;&nbsp;\n<a class='fb-share' style='cursor:pointer;'><img src='/assets/fb-share.png'></a>\n&nbsp;&nbsp;&nbsp;\n<a class='tweet' style='cursor:pointer;'><img src='/assets/tweet-filler.png'></a>\n<a class='backbone' href='"+a.appController.get_contest_namespace()+"/challenges/"+this.model.slug+"/leaderboard'>Go to leaderboard</a>"):b=":(\n&nbsp;\n<a class='backbone' href='"+a.appController.get_contest_namespace()+"/challenges/"+this.model.slug+"'>Try Again</a>",$(this.el).html("<p class='container'>\n  <center>\n    <span>\n      Your "+this.model.name+"\n      <a class='backbone' href='"+a.appController.get_contest_namespace()+"/submissions/"+this.model.kind+"/"+this.model.id+"'>submission</a>\n      got "+c+" points.\n    </span>\n    "+b+"\n  </center>\n</p>\n<a class='close' style='cursor: pointer;'>&times;</a>"),$(this.el).fadeIn(),this.delegateEvents(),this},e.prototype.destroy=function(a){return a.preventDefault(),$(this.el).remove()},e.prototype.fbShare=function(a){var b,c;return a.preventDefault(),c=this.getURL(),b=Math.round(this.model.score*100)/100||0,window.HR.appController.facebook_share(c,"I scored "+b+" points in the "+this.model.name+" challenge on HackerRank "+c)},e.prototype.tweet=function(b){var c,d;return c=Math.round(this.model.score)*100/100||0,b.preventDefault(),d=this.getURL(),a.appController.twitter_share("I scored "+c+" points in the "+this.model.name+" challenge on HackerRank "+d)},e.prototype.getURL=function(){var b,c;return b=document.location.protocol+"//"+document.location.host,c=""+a.appController.get_contest_namespace()+"/submissions/"+this.model.kind+"/"+this.model.id,b+c},e.prototype.fbGraphChallengeCompleted=function(){return window.HR.appController.facebook_graph_activity("solve","challenge",this.getURL())},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionSuccessView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="grouped-hackervshacker",e.prototype.className="grouped-hackervshacker-view",e.prototype.initialize=function(a){this.collection.fetch(),this.listenTo(this.collection,"reset",this.render);if(_.isObject(this.collection.challenge))return this.collection.challenge.bind("reset",this.render,this)},e.prototype.events={"click .expand":"expandChallenge"},e.prototype.expandChallenge=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).parents(".table-primary").find(".table-sub"),b.hasClass("block")?b.slideUp(200).removeClass("block").css("height: auto"):b.slideDown(200).addClass("block").css("height: auto")},e.prototype.render=function(){var a;return this.collection.hacker1&&($(this.el).html(c.appController.template(this.template,this)({collection:this.collection})),c.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage(),null,this.collection.getLimit()),this.$(".hackervshacker-list-wrapper").length>0&&(this.$(".hackervshacker-list-wrapper").html(""),a=this,_.each(this.collection.models,function(b){return c.requires("compound/submission-views","moment",function(){var d;return d=new c.GroupedHackerVsHackerListView({model:b,hacker1:a.collection.hacker1,hacker2:a.collection.hacker2}),a.$(".hackervshacker-list-wrapper").append(d.render().el)})}))),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.GroupedHackerVsHackerView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="grouped-hackervshacker-list",e.prototype.className="grouped-hackervshacker-list-view",e.prototype.initialize=function(a){return this.hacker1=a.hacker1,this.hacker2=a.hacker2,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},e.prototype.events={"click .playgame":"showGameContainer"},e.prototype.showGameContainer=function(a){return a.preventDefault(),this.game_container&&(this.game_container.remove(),this.$("div.row.container").html('<div class="submission-game-container-wrapper" style="margin-left: 18px;"></div>')),this.game_id=$(a.target).attr("data-id"),this.gamemodel=c.appController.getModel("gameset","game_id-"+this.game_id,null,!1,!1),this.gamemodel.set("game_id",this.game_id),this.listenTo(this.gamemodel,"reset",this.renderGameContainer),this.listenTo(this.gamemodel,"change",this.renderGameContainer),this.gamemodel.fetch()},e.prototype.renderGameContainer=function(){var a;return a=this,c.requires("compound/game-views",function(){return a.game_container=new c.GameContainerView({gameset:a.gamemodel,collection:a.gamemodel.getGameCollection()}),a.game_container.setElement($(".row.container.game-"+this.game_id+" .submission-game-container-wrapper")).render()})},e.prototype.render=function(){var a;return this.model.get("challenge")&&(a=this.model.get("games"),$(this.el).html(c.appController.template(this.template,this)({model:this.model.toJSON(),games:a,hacker1:this.hacker1,hacker2:this.hacker2}))),this.delegateEvents(),this},e}(Backbone.View),c=(e=window.HR)!=null?e:{},c.GroupedHackerVsHackerListView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-game-set",e.prototype.className="submission-game-set-view",e.prototype.initialize=function(b){return this._collection=new a.GameSetCollection,this.parent=b.parent,this.gamesetlist={},this.has_template=!1,this.compareCollection()},e.prototype.setModel=function(a){return this.model&&(this.model.unbind("change",this.gamesetCollectionFetch,this),this.model.unbind("reset",this.gamesetCollectionFetch,this)),this.model=a,this.model.bind("change",this.gamesetCollectionFetch,this),this.model.bind("reset",this.gamesetCollectionFetch,this)},e.prototype.gamesetCollectionFetch=function(){if(this.model.get("kind")==="game")return this.collection.fetch({disable_throbber:!0})},e.prototype.closeOtherGameContainersExcept=function(a){return _.each(this.gamesetlist,function(b){if(b!==void 0)return b.hideGameContainerExcept(a)},this)},e.prototype.setGameSetCollection=function(a){if(a)return this.collection&&(this.collection.unbind("reset"),this.collection.unbind("change")),this.collection=a,this.collection.bind("reset",this.render,this),this.collection.bind("change",this.render,this),this.compareCollection()},e.prototype.resetGameSetView=function(){return this.rendered=!1},e.prototype.compareCollection=function(){var b,c,d;if(!this.has_template)return;return d=[],_.each(this._collection.models,function(a){return d.push(a.get("id"))},this),_.each(d,function(a){var b,c;c=this._collection.get(a),b=this.collection.get(c.get("id"));if(!b)return this.removeGameSetView(c)},this),b=null,this.collection.models.length>0?this.$(".throbber").length>0&&this.$(".throbber").remove():this.$(".game-set-wrapper").html("<div class='throbber' style='padding: 95px 0; height: 64px;'>          <img src='https://s3.amazonaws.com/hr-logos/hackerrank_spinner_64x64.gif'>          </div>"),this.model.get("total_players")<this.model.get("player_count")?this.$(".game-set-wrapper").html("            <div class='throbber' style='padding:95px 0; height: 64px;'>              <h3 class='loading-message'>There are no opponents to play with yet.</h3>            </div>            "):this.collection.total===0?(c={all:"Your game is being processed... Please wait.",won:"Your bot did not win any games.",lost:"Congratulations, your bot did not lose any games.",tie:"Your bot did not tie any games."},this.collection.getFilter()==="all"?(this.$(".game-set-wrapper").html("<div class='throbber'>            "+a.appController.viewLoader(64)+("            <div class='throbber' style='padding:0; height: 64px;'>              <h3 class='loading-message'>"+c[this.collection.getFilter()]+"</h3>            </div></div>            ")),this.model.get("player_count")!==1&&this.updateWait()):this.$(".game-set-wrapper").html("            <div class='throbber' style='padding:95px 0; height: 64px;'>              <h3>"+c[this.collection.getFilter()]+"</h3>            </div>            ")):this.timer&&clearTimeout(this.timer),_.each(this.collection.models,function(c){var d,e;return e=c.get("id"),d=this._collection.get(e),d?this.gamesetlist[e].setGameSetModel(c):(b===null?this.$(".game-set-wrapper").children().length!==0?this.$(".game-set-wrapper").children(":first").before("<div class='game-set-list' id='game-set-list-"+e+"'></div>"):this.$(".game-set-wrapper").append("<div class='game-set-list' id='game-set-list-"+e+"'></div>"):this.$(".game-set-wrapper #game-set-list-"+b).after("<div class='game-set-list' id='game-set-list-"+e+"'></div>"),this.gamesetlist[e]||(this.gamesetlist[e]=new a.SubmissionGameSetListView({submission:this.model,parent:this})),this.gamesetlist[e].setElement(this.$(".game-set-wrapper #game-set-list-"+e)).render(),this._collection.add(c),this.gamesetlist[e].setGameSetModel(this.collection.get(c.get("id")))),b=e},this),this.setPagination()},e.prototype.updateWait=function(a){var b=this;return a==null&&(a=0),$(this.el).find(".loading-message").html("Fetching opponents data "+Array(a%3+1).join(".")),clearTimeout(this.timer),this.timer=setTimeout(function(){return b.updateWait(a+1)},5e3)},e.prototype.removeGameSetView=function(a){var b;return b=a.get("id"),this._collection.remove(a),this.gamesetlist[b]&&(this.gamesetlist[b].hideGameContainerExcept,this.gamesetlist[b]=void 0),this.$(".game-set-wrapper #game-set-list-"+b).fadeOut().remove()},e.prototype.render=function(){return this.setTemplate(),this},e.prototype.setTemplate=function(){return this.has_template?(this.applyTemplate(),this.compareCollection()):a.appController.getTemplate(this.template,function(a){return this._template=a,this.has_template=!0,this.applyTemplate(),this.compareCollection()},this)},e.prototype.applyTemplate=function(){if(!this.rendered)return $(this.el).html(this._template()),this._collection=new a.GameSetCollection,this.gamesetlist={},this.rendered=!0},e.prototype.setPagination=function(){var b,c;if((this._collection.page!==this.collection.page||this._collection.total!==this.collection.total)&&this.has_template&&this.rendered)return this._collection.page=this.collection.page,this._collection.total=this.collection.total,c=this.collection.getFilter(),a.util.pagination(this.$(".pagination-wrapper"),this._collection.total,""+a.appController.get_contest_namespace()+"/submissions/game/"+this.model.get("id")+"/"+this.collection.getFilter()+"/page/",this._collection.page,null,5,10,"change-gameset"),b=this,this.$(".pagination a.change-gameset").click(function(d){var e,f,g,h,i;return d.preventDefault(),g=parseInt($(d.currentTarget).attr("data-page")),f=$(d.currentTarget).attr("href"),h=b.collection.getSid(),i=function(a){return a.setPage(g),a.setFilter(c),a.setSid(h)},a.router.navigate(f,!1),e=a.appController.getCollection("gameset","id-"+h+"-"+c+"-page-"+g,i,!0,!0),b.parent.setGameSetCollection(e)})},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionGameSetView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-game-set-list",e.prototype.className="submission-game-set-view-list",e.prototype.initialize=function(b){return this.parent=b.parent,this.submission=b.submission,this._collection=new a.GameCollection,this.has_template=!1},e.prototype.events={"click .play_game":"showGameContainer"},e.prototype.render=function(){return this.renderTemplate(),this},e.prototype.renderTemplate=function(){return this.has_template?this.setGameSetModel(this.model):a.appController.getTemplate(this.template,function(a){return this._template=a,this.has_template=!0,this.setGameSetModel(this.model)},this)},e.prototype.compareGamesetModel=function(){return this._model&&this.model?!this._compareObjects(this._model.attributes,this.model.attributes):!this.model&&!this.model?!1:!0},e.prototype._compareObjects=function(a,b){var c;c=!1;if(!a||!b){if(!!a||!!b)c=!0}else _.isArray(a)&&_.isArray(b)?_.size(a)===_.size(b)?_.each(a,function(a){var d;d=!0,_.each(b,function(b){if(this._compareObjects(a,b))return d=!1},this);if(d===!0)return c=!0},this):c=!0:_.isObject(a)&&_.isObject(b)?_.size(a)===_.size(b)?_.each(a,function(a,d){if(!this._compareObjects(b[d],a))return c=!0},this):c=!0:a!==b&&(c=!0);return!c},e.prototype.setGameSetModel=function(b){var c,d;if(b){this.model=b;if(this.compareGamesetModel()||!this.has_rendered){this.model&&this._template&&(this._model&&(this._model.unbind("change"),this._model.unbind("render")),this._model=this.model,this._model.bind("change",this.render,this),this._model.bind("render",this.render,this),this.has_rendered=!0,$(this.el).html(this._template()),this.players_view=new a.SubmissionGameSetPlayersView({model:this._model,parent:this}),this.players_view.setElement($($(this.el).find(".players"))).render(),d=this._model.get("games"),c=!1,_.each(d,function(a){if(a.process_flag===1)return c=!0}),c?$(this.el).find("a.play_game").removeClass("disabled"):$(this.el).find("a.play_game").addClass("disabled"));if(this._model&&this._model.getGameCollection)return this.collection=this._model.getGameCollection(),this.compareCollection()}}},e.prototype.compareCollection=function(){var a;if(!this.collection)return;if(!this.has_template)return;return _.each(this._collection.models,function(a){var b;b=this.collection.get(a.get("id"));if(!b)return this._collection.remove(a)},this),a=null,_.each(this.collection.models,function(b){var c;return c=this._collection.get(b.get("id")),c?c.get("updated_at")!==b.get("updated_at")&&c.set(b.attributes):a?this._collection.add(b,{at:a}):this._collection.unshift(b),a=this._collection.indexOf(b)},this)},e.prototype.showGameContainer=function(b){var c;b.preventDefault();if($(b.currentTarget).hasClass("disabled"))return;return this.game_container&&(this.game_container.remove(),this.$("div.row.container").html('<div class="submission-game-container-wrapper" style="margin-left: 18px;"></div>')),c=this,a.requires("compound/game-views",function(){return c.game_container=new a.GameContainerView({collection:c._collection,gameset:c._model}),c.game_container.setElement(c.$(".submission-game-container-wrapper")).render(),c.parent.closeOtherGameContainersExcept(c)})},e.prototype.hideGameContainerExcept=function(a){if(a.model!==this._model&&this.game_container)return this.game_container.closeContainer()},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionGameSetListView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.template="",c.prototype.initialize=function(a){return this.parent=a.parent,this.model.bind("reset",this.render,this)},c.prototype.render=function(){var a,b,c,d,e,f,g,h;return this.model.get("actors")?(a=this.parent.parent.parent.model.get("hacker_id"),$(this.el).html(_.template(this.template)()),h=this.model.toJSON(),f=h.actors.length,b=h.games,g=
{processed:0,pending:0,won:0,lost:0,tie:0,score_pending:0,score_processed:0},g.total=b.length,_.each(b,function(b){var c;if(b.process_flag!==1)return g.pending+=1,g.score_pending+=1;g.processed+=1,b.status===0?g.score_pending+=1:g.score_processed+=1;if(b.result===1){c=null,_.each(b.actors,function(a){if(a.actor===1)return c=a});if(c!==null)return c.hacker_id===a?g.won+=1:g.lost+=1}else if(b.result===2){c=null,_.each(b.actors,function(a){if(a.actor===2)return c=a});if(c!==null)return c.hacker_id===a?g.won+=1:g.lost+=1}else if(b.result===0)return g.tie+=1}),d={},c=[],_.each(h.actors,function(a){return c.push(a.hacker_id),d[a.hacker_id]=a},this),e="<style>          table.stats, table.stats th, table.stats td          {            border: 1px solid #999;          }          table.stats td {            padding: 5px;          }          table.stats {            float: left;            margin-right: 10px;          }        </style>",e+="<div class='span5' style='text-align: left;'>",_.each(c,function(b,c){if(a!==b)return e+="<img style='border-radius: 5px; margin-right: 10px;' src='"+d[b].hacker_avatar+"' height='25' width='25'> <span class='username' style='vertical-align: top;margin-top: 5px;display: inline-block;'>"+d[b].hacker_username+"</span>"}),e+="</div>",e+="<div class='span8 clearfix' style='padding-bottom:10px;'>",g.pending>0?e+="<span class='process-pending'>"+g.processed+"/"+g.total+" games played.</span>":(e+="<span class='result'>",f===1?e+="Processed":g.won>g.lost?e+="You won the match":g.won<g.lost?e+="You lost the match":e+="You tied the match",e+=".</span>",g.score_pending>0&&(e+=" <span class='score-pending'>Score evaluation pending.</span>")),e+="</div>",$(this.el).html(e),this):this},c}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionGameSetPlayersView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-game-container",e.prototype.className="submission-game-container-view",e.prototype.initialize=function(a){return this.parent=a.parent,this.render()},e.prototype.render=function(){return $(this.el).html(a.appController.template(this.template,this)()),this.delegateEvents(),this},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionGameContainerView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.template="submission-manual-game-play",e.prototype.className="submission-manual-game-play-view",e.prototype.initialize=function(a){return this.contest=a.contest},e.prototype.render=function(){return this.has_template?this.applyTemplate():a.appController.getTemplate(this.template,function(a){return this._template=a,this.applyTemplate(),this.has_template=!0},this),this},e.prototype.applyTemplate=function(){if(!this.rendered()&&this._template&&this.model&&this.model.sync_status)return $(this.el).html(this._template({model:this.model,_model:this.model.toJSON()})),this.renderView()},e.prototype.rendered=function(){return $(this.el).html()!==""},e.prototype.renderView=function(){var b;b=this;if(this.$(".select2-container").length!==0){$(this.el).html(""),this.$("#moreplayers").unbind("change"),this.render();return}return this.$("#moreplayers").select2({placeholder:"Search for an opponent",minimumInputLength:2,ajax:{url:"/rest/contests/"+this.contest.get("slug")+"/challenges/"+this.model.get("slug")+"/hackers/autocomplete",dataType:"json",data:function(a,c){return{q:a,challenge_id:b.model.get("challenge_id")}},results:function(a,b){return a}}}),b=this,this.$("#moreplayers").change(function(c){var d;return d=$(c.currentTarget).val(),$("#loadingagainst").show(),b.$("img.spinner").show(),$.post("/rest/games/",{id:b.model.get("id"),against:d,challenge_id:b.model.get("challenge_id")},function(c){return b.contest&&b.contest.get("id")&&b.contest.get("id")!==1?a.router.navigate("/contests/"+b.contest.get("slug")+"/submissions/"+b.model.get("kind")+"/"+b.model.get("id")+"/page/"+c.page,!0):a.router.navigate("/submissions/"+b.model.get("kind")+"/"+b.model.get("id")+"/page/"+c.page,!0),b.$("img.spinner").hide(),b.model.fetch({force_fetch:!0}),b.$("#loadingagainst").hide(),b.render(),b.renderView()})}),this.delegateEvents},e.prototype.setModel=function(a){return this.model&&(this.model.unbind("reset",this.render,this),this.model.unbind("change",this.render,this)),this.model=a,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.render()},e.prototype.setGameSetCollection=function(a){return this.collection&&(this.collection.unbind("reset",this.render,this),this.collection.unbind("change",this.render,this)),this.collection=a,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render),this.render()},e.prototype.playagainst=function(a){},e}(Backbone.View),a=(e=window.HR)!=null?e:{},a.SubmissionManualGamePlayView=c})}.call(this)